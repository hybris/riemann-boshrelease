(info "Loading elastic alerts")

(defn elastic-alerts [pd]
  (info "Setting up elastic alerts")

  (where (service "elasticsearch health")
    (changed-state {:init "ok"}
      (stable 180 :state
        (where (state "critical")
          (with :description "https://cloud.gov/docs/ops/runbook/troubleshooting-logsearch"
            (:trigger pd))
        (else
          (:resolve pd))))))
)
